{% extends "base.html" %}

{% block title %}Calendario - Sistema Odontológico{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row align-items-center">
            <div class="col-md-4">
              <label class="form-label">Vista</label>
              <div class="btn-group w-100" role="group">
                <input type="radio" class="btn-check" name="vista" id="vista-dia" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="vista-dia">Día</label>

                <input type="radio" class="btn-check" name="vista" id="vista-semana" autocomplete="off">
                <label class="btn btn-outline-primary" for="vista-semana">Semana</label>

                <input type="radio" class="btn-check" name="vista" id="vista-mes" autocomplete="off">
                <label class="btn btn-outline-primary" for="vista-mes">Mes</label>
              </div>
            </div>

            <div class="col-md-4">
              <label for="fecha-selector" class="form-label">Fecha</label>
              <input type="date" class="form-control" id="fecha-selector" value="">
            </div>

            <div class="col-md-4">
              <label class="form-label">Estado</label>
              <select class="form-select" id="filtro-estado">
                <option value="">Todos los turnos</option>
                <option value="confirmado">Confirmados</option>
                <option value="pendiente">Pendientes</option>
                <option value="completado">Completados</option>
                <option value="cancelado">Cancelados</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Agenda -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="bi bi-calendar3 me-2"></i>Agenda</h5>
          <button class="btn btn-primary btn-sm">
            <i class="bi bi-plus-lg me-1"></i> Nuevo Turno
          </button>
        </div>
        <div class="card-body">
          {% if turnos and turnos|length > 0 %}
          <ul class="list-group">
            {% for turno in turnos %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <strong>{{ turno.paciente }}</strong><br>
                <small class="text-muted">{{ turno.fecha }} - {{ turno.hora }}</small>
              </div>
              <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Acciones
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <button class="dropdown-item" onclick="editarTurno('{{ loop.index }}')">
                      Editar
                    </button>
                  </li>
                  <li>
                    <button class="dropdown-item text-success" onclick="confirmarTurno('{{ loop.index }}')">
                      Confirmar
                    </button>
                  </li>
                  <li>
                    <button class="dropdown-item text-danger" onclick="cancelarTurno('{{ loop.index }}')">
                      Cancelar
                    </button>
                  </li>
                </ul>
              </div>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <p class="text-muted text-center">No hay turnos programados</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function editarTurno(id) {
  alert("Editar turno " + id);
}
function confirmarTurno(id) {
  alert("Confirmar turno " + id);
}
function cancelarTurno(id) {
  alert("Cancelar turno " + id);
}
</script>
{% endblock %}
